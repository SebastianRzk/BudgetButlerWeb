<div class="theme-double-columns">
	<div class="box">
		<div class="box-header">
			<h3 class="box-title">Daten</h3>
		</div>
		<div class="box-body">
			<div class="table-responsive">
				<table>
					<thead>
						<tr>
							<th>Name</th>
							<th>Letzte Aktualisierung</th>
							<th>Aktion</th>
						</tr>
					</thead>
					<tbody>
						{% for etf in etfs %}
						<tr>
							<td>{{etf.Name}}</td>
							<td>{{etf.Datum}}</td>
							<td>
								<form role="form" action="/uebersicht_etfs/" method="post">
									<input type="hidden" name="isin" value="{{etf.ISIN}}">
									<input type="hidden" name="action" value="update_data">
									<button type="submit" name="action" value="update_etf_data" id="edit_{{etf.ISIN}}" class="btn bordered-hover">Daten aktualisiern</button>
								</form>
							</td>
						</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

{% if regions %}

<div class="box theme-row">
	<div class="box-header">
		<h3 class="box-title">Regionen</h3>
	</div>
  <div class="box-body">
	  <canvas id="region-canvas" class="diagramm-canvas"></canvas>
  </div>
  <script>
    var color = Chart.helpers.color;
    var regionData = {
        labels: [
        	{% for e in regions['regions'] %}
				"{{e[0]}}",
			{% endfor %}
        ],
        datasets: [{
            label: 'Wert',
            backgroundColor: color('red').alpha(0.5).rgbString(),
            borderColor: 'red',
            borderWidth: 1,
            data: [
				{% for e in regions['regions'] %}
					{{e[1]['euro']}},
				{% endfor %}
            ]
        }]
    };

    window.onload = function() {
        var ctx = document.getElementById("region-canvas").getContext("2d");
        window.myBar = new Chart(ctx, {
            type: 'pie',
            data: regionData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {
                    display: false,
                }
            }
        });
    };
  </script>
</div>



<div class="box theme-row">
	<div class="box-header">
		<h3 class="box-title">Regionen</h3>
	</div>
	<div class="box-body">
		<div class="table-responsive">
			<table class="hover-table">
				<thead>
					<tr>
						<th></th>
						{% for region in regions['header'] %}
						<th colspan="2" class="table-border-left table-gap">{{region}}</th>
						{% endfor%}
					</tr>
					<tr>
						<th>Land</th>
						{% for region in regions['header'] %}
						<th class="table-border-left table-gap">Euro</th>
						<th class="table-gap-left">Anteil</th>
						{% endfor%}
					</tr>
				</thead>
				<tbody>
					{% for region in regions['regions'] %}
					<tr>

						<td>{{region[0]}}</td>
						{% for etf in region[1:]%}
							<td class="table-border-left table-gap">{{etf.euro_str}}â‚¬</td>
							<td class="table-gap">{{etf.percent_str}}%</td>
						{% endfor %}
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
{% endif %}